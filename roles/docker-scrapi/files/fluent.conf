<source>
  type tail
  path /var/lib/docker/containers/*/*-json.log
  pos_file /var/log/fluentd-docker.pos
  time_format %Y-%m-%dT%H:%M:%S
  tag dockerformat.*
  format json
</source>

<match dockerformat.var.lib.docker.containers.*.*.log>
  type docker_format
  container_id ${tag_parts[5]}
  tag docker.${name.split('_').join('.')}
</match>

#<match reform.docker.**>
#  type docker_format
#  container_id ${tag_parts[5]}
#  tag docker.${name}
#</match>

#<match reform.**>
#  type record_reformer
#  enable_ruby true
#  tag docker..${tag_suffix[3].split('-')[0..-2].join('-')}
#</match>

<match docker.waterbutler>
  type file
  path /var/log/docker-waterbutler/*.log
  format json
  include_time_key true
</match>

<match docker.**>
  type file
  path /var/log/docker/*.log
  format json
  include_time_key true
</match>
